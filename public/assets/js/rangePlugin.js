!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).rangePlugin=t()}(this,function(){"use strict";return function(e){return void 0===e&&(e={}),function(t){var n,i,o,u="",a={onParseConfig:function(){t.config.mode="range",u=t.config.altInput?t.config.altFormat:t.config.dateFormat},onReady:function(){!function(){if(e.input){if(!(n=e.input instanceof Element?e.input:window.document.querySelector(e.input)))return void t.config.errorHandler(new Error("Invalid input element specified"));t.config.wrap&&(n=n.querySelector("[data-input]"))}else(n=t._input.cloneNode()).removeAttribute("id"),n._flatpickr=void 0;if(n.value){var o=t.parseDate(n.value);o&&t.selectedDates.push(o)}n.setAttribute("data-fp-omit",""),t._bind(n,["focus","click"],function(){t.selectedDates[1]&&(t.latestSelectedDateObj=t.selectedDates[1],t._setHoursFromDate(t.selectedDates[1]),t.jumpToDate(t.selectedDates[1])),i=!0,t.isOpen=!1,t.open(void 0,"left"===e.position?t._input:n)}),t._bind(t._input,["focus","click"],function(e){e.preventDefault(),t.isOpen=!1,t.open()}),t.config.allowInput&&t._bind(n,"keydown",function(e){"Enter"===e.key&&(t.setDate([t.selectedDates[0],n.value],!0,u),n.click())}),e.input||t._input.parentNode&&t._input.parentNode.insertBefore(n,t._input.nextSibling)}(),t.config.ignoredFocusElements.push(n),t.config.allowInput?(t._input.removeAttribute("readonly"),n.removeAttribute("readonly")):n.setAttribute("readonly","readonly"),t._bind(t._input,"focus",function(){t.latestSelectedDateObj=t.selectedDates[0],t._setHoursFromDate(t.selectedDates[0]),i=!1,t.jumpToDate(t.selectedDates[0])}),t.config.allowInput&&t._bind(t._input,"keydown",function(e){"Enter"===e.key&&t.setDate([t._input.value,t.selectedDates[1]],!0,u)}),t.setDate(t.selectedDates,!1),a.onValueUpdate(t.selectedDates),t.loadedPlugins.push("range")},onPreCalendarPosition:function(){i&&(t._positionElement=n,setTimeout(function(){t._positionElement=t._input},0))},onChange:function(){t.selectedDates.length||setTimeout(function(){t.selectedDates.length||(n.value="",o=[])},10),i&&setTimeout(function(){n.focus()},0)},onDestroy:function(){e.input||n.parentNode&&n.parentNode.removeChild(n)},onValueUpdate:function(e){var a,s,l;if(n){if((o=!o||e.length>=o.length?e.slice():o).length>e.length){var c=e[0],r=i?[o[0],c]:[c,o[1]];t.setDate(r,!1),o=r.slice()}s=(a=t.selectedDates.map(function(e){return t.formatDate(e,u)}))[0],t._input.value=void 0===s?"":s,l=a[1],n.value=void 0===l?"":l}}};return a}}});