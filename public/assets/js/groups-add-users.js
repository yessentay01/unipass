var tableUsuariosDisponiveis,checkAdicionarUsuario;function carregarUsuariosDisponiveis(){tableUsuariosDisponiveis.block(),tableUsuariosDisponiveis.api().ajax.url("api/groups/"+grupoId+"/users/available").load(function(){tableUsuariosDisponiveis.unblock()})}$(function(){$("#modalUsuariosDisponiveis").on("hidden.bs.modal",function(){checkAdicionarUsuario=[]}).on("shown.bs.modal",function(){carregarUsuariosDisponiveis(),checkAdicionarUsuario=[]}),(tableUsuariosDisponiveis=$("#tableUsuariosDisponiveis").dataTable({autoWidth:!1,order:[1,"asc"],deferLoading:0,info:!1,buttons:[],columns:[{data:"id",orderable:!1,render:function(i){return'<input type="checkbox" class="form-check-input btnCheckUsuario" data-id="'+i+'">'}},{data:"name",width:"100%"}]})).on("click","tbody > tr .btnCheckUsuario",function(){var i=$(this).attr("data-id");$(this).is(":checked")?checkAdicionarUsuario.push({user_id:i}):checkAdicionarUsuario=checkAdicionarUsuario.filter(function(o){return o.user_id!=i}),$("#btnUsuariosSalvar").toggleClass("disabled",0===checkAdicionarUsuario.length)}),$("#btnUsuariosSalvar").click(function(){let i="users="+JSON.stringify(checkAdicionarUsuario),o=$("#modalUsuariosDisponiveis"),a=o.find(".modal-content");a.block(),$.request({url:"/api/groups/"+grupoId+"/users",method:"POST",data:i,error:function(){a.unblock()},after:function(){carregarUsuariosDoGrupo(),o.modal("hide"),a.unblock()}})})});